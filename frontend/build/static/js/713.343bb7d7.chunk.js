/*! For license information please see 713.343bb7d7.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[713],{2489:(e,s,t)=>{t.d(s,{A:()=>i});const i=(0,t(7784).A)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},2713:(e,s,t)=>{t.r(s),t.d(s,{default:()=>m});var i=t(9379),a=t(5043),n=t(3248),r=t(2532),l=t(7097),o=t(8677),d=t(2489),c=t(7784);const h=(0,c.A)("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),u=(0,c.A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var v=t(9989),A=t(9855),y=t(579);const m=()=>{const e=(0,n.jE)(),[s,t]=(0,a.useState)(null),{data:c,isLoading:m}=(0,r.I)({queryKey:["users"],queryFn:async()=>(await o.A.get("/users")).data}),p=(0,l.n)({mutationFn:async e=>{let{id:s,role:t}=e;return(await o.A.patch("/users/".concat(s,"/role"),{role:t})).data},onSuccess:()=>{e.invalidateQueries({queryKey:["users"]}),t(null)}}),j=(0,l.n)({mutationFn:async e=>(await o.A.delete("/users/".concat(e))).data,onSuccess:()=>{e.invalidateQueries({queryKey:["users"]})}}),x=e=>{switch(e){case"admin":return(0,y.jsx)(d.A,{className:"role-icon admin"});case"user":return(0,y.jsx)(h,{className:"role-icon user"});case"read-only":return(0,y.jsx)(u,{className:"role-icon readonly"});default:return null}};return m?(0,y.jsx)("div",{className:"loading",children:"Loading users..."}):(0,y.jsxs)("div",{className:"users",children:[(0,y.jsxs)("div",{className:"users-header",children:[(0,y.jsx)("h1",{children:"User Management"}),(0,y.jsx)("div",{className:"users-stats",children:(0,y.jsxs)("span",{children:["Total Users: ",(null===c||void 0===c?void 0:c.length)||0]})})]}),(0,y.jsxs)("div",{className:"users-table",children:[(0,y.jsxs)("table",{children:[(0,y.jsx)("thead",{children:(0,y.jsxs)("tr",{children:[(0,y.jsx)("th",{children:"ID"}),(0,y.jsx)("th",{children:"Username"}),(0,y.jsx)("th",{children:"Email"}),(0,y.jsx)("th",{children:"Role"}),(0,y.jsx)("th",{children:"Joined"}),(0,y.jsx)("th",{children:"Actions"})]})}),(0,y.jsx)("tbody",{children:null===c||void 0===c?void 0:c.map(e=>(0,y.jsxs)("tr",{children:[(0,y.jsx)("td",{children:e.id}),(0,y.jsx)("td",{children:e.username}),(0,y.jsx)("td",{children:e.email}),(0,y.jsx)("td",{children:(null===s||void 0===s?void 0:s.id)===e.id?(0,y.jsxs)("select",{value:s.role,onChange:e=>t((0,i.A)((0,i.A)({},s),{},{role:e.target.value})),onBlur:()=>{(async(e,s)=>{await p.mutateAsync({id:e,role:s})})(s.id,s.role)},autoFocus:!0,children:[(0,y.jsx)("option",{value:"admin",children:"Admin"}),(0,y.jsx)("option",{value:"user",children:"User"}),(0,y.jsx)("option",{value:"read-only",children:"Read-Only"})]}):(0,y.jsxs)("div",{className:"role-display",children:[x(e.role),(0,y.jsx)("span",{className:"role-badge ".concat(e.role),children:e.role})]})}),(0,y.jsx)("td",{children:new Date(e.created_at).toLocaleDateString()}),(0,y.jsx)("td",{children:(0,y.jsxs)("div",{className:"actions",children:[(0,y.jsx)("button",{className:"btn-icon",onClick:()=>t(e),title:"Edit Role",children:(0,y.jsx)(v.A,{size:16})}),(0,y.jsx)("button",{className:"btn-icon delete",onClick:()=>(async e=>{window.confirm("Are you sure you want to delete this user?")&&await j.mutateAsync(e)})(e.id),title:"Delete User",children:(0,y.jsx)(A.A,{size:16})})]})})]},e.id))})]}),0===(null===c||void 0===c?void 0:c.length)&&(0,y.jsx)("div",{className:"empty-state",children:(0,y.jsx)("p",{children:"No users found"})})]})]})}},7097:(e,s,t)=>{t.d(s,{n:()=>w});var i,a,n,r,l,o=t(9379),d=t(5043),c=t(9790),h=t(5149),u=t(8458),v=t(6562),A=t(4558),y=t(5239),m=t(1454),p=t(329),j=t(9723),x=(i=new WeakMap,a=new WeakMap,n=new WeakMap,r=new WeakMap,l=new WeakSet,class extends p.Q{constructor(e,s){super(),(0,c.A)(this,l),(0,h.A)(this,i,void 0),(0,h.A)(this,a,void 0),(0,h.A)(this,n,void 0),(0,h.A)(this,r,void 0),(0,A.A)(i,this,e),this.setOptions(s),this.bindMethods(),(0,v.A)(l,this,b).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var s;const t=this.options;this.options=(0,u.A)(i,this).defaultMutationOptions(e),(0,j.f8)(this.options,t)||(0,u.A)(i,this).getMutationCache().notify({type:"observerOptionsUpdated",mutation:(0,u.A)(n,this),observer:this}),null!==t&&void 0!==t&&t.mutationKey&&this.options.mutationKey&&(0,j.EN)(t.mutationKey)!==(0,j.EN)(this.options.mutationKey)?this.reset():"pending"===(null===(s=(0,u.A)(n,this))||void 0===s?void 0:s.state.status)&&(0,u.A)(n,this).setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||(null===(e=(0,u.A)(n,this))||void 0===e||e.removeObserver(this))}onMutationUpdate(e){(0,v.A)(l,this,b).call(this),(0,v.A)(l,this,k).call(this,e)}getCurrentResult(){return(0,u.A)(a,this)}reset(){var e;null===(e=(0,u.A)(n,this))||void 0===e||e.removeObserver(this),(0,A.A)(n,this,void 0),(0,v.A)(l,this,b).call(this),(0,v.A)(l,this,k).call(this)}mutate(e,s){var t;return(0,A.A)(r,this,s),null===(t=(0,u.A)(n,this))||void 0===t||t.removeObserver(this),(0,A.A)(n,this,(0,u.A)(i,this).getMutationCache().build((0,u.A)(i,this),this.options)),(0,u.A)(n,this).addObserver(this),(0,u.A)(n,this).execute(e)}});function b(){var e,s;const t=null!==(e=null===(s=(0,u.A)(n,this))||void 0===s?void 0:s.state)&&void 0!==e?e:(0,y.$)();(0,A.A)(a,this,(0,o.A)((0,o.A)({},t),{},{isPending:"pending"===t.status,isSuccess:"success"===t.status,isError:"error"===t.status,isIdle:"idle"===t.status,mutate:this.mutate,reset:this.reset}))}function k(e){m.jG.batch(()=>{if((0,u.A)(r,this)&&this.hasListeners()){const h=(0,u.A)(a,this).variables,v=(0,u.A)(a,this).context;var s,t,i,n;if("success"===(null===e||void 0===e?void 0:e.type))null===(s=(t=(0,u.A)(r,this)).onSuccess)||void 0===s||s.call(t,e.data,h,v),null===(i=(n=(0,u.A)(r,this)).onSettled)||void 0===i||i.call(n,e.data,null,h,v);else if("error"===(null===e||void 0===e?void 0:e.type)){var l,o,d,c;null===(l=(o=(0,u.A)(r,this)).onError)||void 0===l||l.call(o,e.error,h,v),null===(d=(c=(0,u.A)(r,this)).onSettled)||void 0===d||d.call(c,void 0,e.error,h,v)}}this.listeners.forEach(e=>{e((0,u.A)(a,this))})})}var f=t(3248);function w(e,s){const t=(0,f.jE)(s),[i]=d.useState(()=>new x(t,e));d.useEffect(()=>{i.setOptions(e)},[i,e]);const a=d.useSyncExternalStore(d.useCallback(e=>i.subscribe(m.jG.batchCalls(e)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),n=d.useCallback((e,s)=>{i.mutate(e,s).catch(j.lQ)},[i]);if(a.error&&(0,j.GU)(i.options.throwOnError,[a.error]))throw a.error;return(0,o.A)((0,o.A)({},a),{},{mutate:n,mutateAsync:a.mutate})}},9855:(e,s,t)=>{t.d(s,{A:()=>i});const i=(0,t(7784).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},9989:(e,s,t)=>{t.d(s,{A:()=>i});const i=(0,t(7784).A)("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]])}}]);
//# sourceMappingURL=713.343bb7d7.chunk.js.map